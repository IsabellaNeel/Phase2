<!DOCTYPE html>

<html lang="en">

<head>
    <title>Your Kitchen</title>
    <link rel="stylesheet" href="style.css" />
    <meta charset="UTF-8" />
<head>

<body style = "background-color: #eceff1">
    <div class = "navbar upper">
        <table style = "border: none; height: 100%; width: calc(100vw + 8px); font-size: 2rem">
            <tr style = "width: calc(100vw + 8px);">
                <td style = "width: 5%"></td>
                <td style = "width: 45%"><p style = "font-weight: bold !important; text-align: left !important">My kitchen</p></td>
                <td style = "width: 40%"></td>
                <td style = "width: 5%">&#8801;</td>
                <td style = "width: 5%"></td>
            </tr>
        </table>
    </div>

    <div style="height: 10vh"></div>

    <div>
        <!-- The form -->
        <div class="form-popup" id="myForm">
        <form action="/action_page.php" class="form-container">
            <h1 style="padding:5%">Add Food Entry to Your Kitchen</h1>
    
            <label for="foodLabel"><b>Food Label</Label></b></label>
            <input type="text" placeholder="Enter Food Label" name="foodLabel" id="foodLabel" required>
    
            <label for="expiration"><b>Expiration Date</b></label>
            <input type="text" placeholder="Enter Expiration Date" name="expiration" id="expiration">
    
            <label for="allergens"><b></Label>Allergens</b></label>
            <input type="text" placeholder="Enter Allergens" name="allergens" id="allergens">
    
            <label for="calories"><b></Label>Calories</b></label>
            <input type="number" placeholder="Enter Calories" name="calories" id="calories"> 
            <br>       
            <br>
            <label for="servingSize"><b></Label>Serving Size</b></label>
            <input type="text" placeholder="Enter Serving Size" name="servingSize" id="servingSize">
    
            <button type="button" class="btn" onclick="formatToAdd()">Enter</button>
            <button type="button" class="btn cancel" onclick="closeForm()">Cancel</button>
        </form>
        </div>
    <h1 id="result"></h1>
            <!-- A button to open the popup form -->
            <button style="bottom:11%; right:2%" class="open-button" onclick="openForm()">Add Food</button>
    </div>

    <div class = "navbar lower">
        <table style = "border: none; height: 100%; width: calc(100vw + 8px);">
            <tr style = "width: calc(100vw + 8px);">
                <td style = "width: 5%"></td>
                <td class = "navitem selected" onclick = "location.href='YourKitchenTab.html'"><p>Kitchen</p></td>
                <td class = "navitem" onclick = "location.href='RecipesTab.html'"><p>Recipes</p></td>
                <td class = "navitem" onclick = "location.href='ShoppingListTab.html'"><p>Cart</p></td>
                <td class = "navitem" onclick = "location.href='UserProfileTab.html'"><p>Profile</p></td>
                <td style = "width: 5%"></td>
            </tr>
        </table>
    </div>
</body>

<script>
    let user1 = {userName:"Bob", foodArr: new Array()}
    
    function openForm() {
        document.getElementById("myForm").style.display = "block";
      }
      
      function closeForm() {
        document.getElementById("myForm").style.display = "none";
      }

      function formatToAdd(){
        var nameValue = document.getElementById("foodLabel").value;
        var expirationValue = document.getElementById("expiration").value;
        var allergensValue = document.getElementById("allergens").value;
        var caloriesValue = document.getElementById("calories").value;
        var servingSizeValue = document.getElementById("servingSize").value;

        let foodItem = {name: nameValue, expiration: expirationValue, 
            allergens: allergensValue, calories: caloriesValue, 
            owner:user1.userName, servingSize: servingSizeValue};

        user1.foodArr.push(foodItem);

        var results = "<table style=\" border-spacing:20px\">";
        let balanced = 0;
        for(let i in user1.foodArr){
            if(i%3 == 0){
                results = results + "<tr><td style=\"border: 3px solid #5e5858; height:230px; width:289.2px; padding: 5%\">" + user1.foodArr[i].name + "</td>"; /*+ "<br>Expiration: " +
                user1.foodArr[i].expiration + "<br>Allergens: " + user1.foodArr[i].allergens + 
                "<br>Calories: " + user1.foodArr[0].calories + "<br>Serving Size: " + 
                user1.foodArr[i].servingSize + "<br> + </td>";*/
            } else if ((i+1)%3 == 0){
                results = results + "<td style=\"border: 3px solid #5e5858; height:230px; width:289.2px; padding: 5%\">" + user1.foodArr[i].name + "</td></tr>";
            } else {
                results = results + "<td style=\"border: 3px solid #5e5858; height:230px; width:289.2px; padding: 5%\">" + user1.foodArr[i].name + "</td>";/*+ "<br>Expiration: " +
                user1.foodArr[i].expiration + "<br>Allergens: " + user1.foodArr[i].allergens + 
                "<br>Calories: " + user1.foodArr[0].calories + "<br>Serving Size: " + 
                user1.foodArr[i].servingSize + "<br></td>";*/
            }
            balanced = i;
        }

        if((balanced + 1)%3 != 0){
            results = results + "</td></table>";
        } else {
            results = results + "</table>";
        }
       
        document.getElementById("result").innerHTML = results;
        closeForm();
      }

      /*results = results + "<td><br>Food Item " + i + "<br>Name: " + user1.foodArr[i].name + "<br>Expiration: " +
                user1.foodArr[i].expiration + "<br>Allergens: " + user1.foodArr[i].allergens + 
                "<br>Calories: " + user1.foodArr[0].calories + "<br>Serving Size: " + 
                user1.foodArr[i].servingSize + "<br></td>";*/
</script>

